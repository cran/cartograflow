<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Françoise Bahoken, Sylvain Blondeau" />

<meta name="date" content="2023-10-17" />

<title>Cartograflow</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Cartograflow</h1>
<h3 class="subtitle">Filtering Origin-Destination Matrix for Thematic
Flow Mapping</h3>
<h4 class="author">Françoise Bahoken, Sylvain Blondeau</h4>
<h4 class="date">2023-10-17</h4>



<p><code>Cartograflow</code> is designed to filter origin-destination
(OD) flow matrix for thematic mapping purposes.</p>
<div id="description-of-functions" class="section level2">
<h2>Description of functions</h2>
<p><strong>1. Preparing flow data sets:</strong> <br /></p>
<p><strong>1.1 General functions</strong><br /> You can use long “L” or
matrix “M” [n*n] flow dataset formats.</p>
<p>– <code>flowtabmat()</code> is to transform “L” to “M” formats, also
to build an empty square matrix from spatial codes.</p>
<p>– <code>flowcarre()</code> is to square a matrix.</p>
<p>– <code>flowjointure()</code> is to performs a spatial join between a
flow dataset and a spatial features layer or an external matrix.</p>
<p>– <code>flowstructmat()</code> fixes an unpreviously codes shift in
the flow dataset “M” format. If necessary this function is to be used
with <code>flowjointure</code> and <code>flowtabmat</code>.</p>
<p><strong>1.2. Flow computation:</strong></p>
<p>– <code>flowtype()</code> is to compute several types of flow from an
asymmetric matrix: <br /> x= <code>flux</code> for remaining initial flow
(Fij) <br /> x= <code>transpose</code> for reverse flow value (Fji) <br />
x= <code>bivolum</code> for bilateral volum, as gross flow (FSij)<br />
x= <code>bibal</code> for bilateral balance, as net flow (FBij) <br /> x=
<code>biasym</code> for asymetry of bilateral flow (FAij) <br /> x=
<code>bimin</code> for minimum of bilateral flow (minFij) <br /> x=
<code>bimax</code> for maximum of bilateral flow (maxFij) <br /> x=
<code>birange</code> for bilateral flow range (rangeFij) <br /> x=
<code>bidisym</code> for bilateral disymetry as (FDij) <br /></p>
<p>– <code>flowplaces()</code> is to compute several types of flow
places oriented from an asymmetric:<br /> ie. as a dataframe that
describes the flows from Origin / destination point of view <br /> x=
<code>ini</code> for the number of incoming links (as in-degree) <br />
x= <code>outi</code> for the number of outcoming links (as out-degree)
<br /> x= <code>degi</code> for the total number of links (as in and out
degrees) <br /> x= <code>intra</code> for total intra zonal interaction
(if main diagonal is not empty <br /> x= <code>Dj</code> for the total
flows received by (j) place <br /> x= <code>voli</code> for the total
volume of flow per place <br /> x= <code>bali</code> for the net balance
of flow per place <br /> x= <code>asyi</code> for the asymetry of flow
per place <br /> x= <code>allflowplaces</code> for computing all the
above indicators <br /></p>
<p><strong>1.3. Flow reduction:</strong></p>
<p>– <code>flowlowup()</code> is to extracts the upper or the lower
triangular part of a matrix - preferably for symmetrical matrixes.</p>
<p>x= <code>up</code> for the part above the main diagonal <br /> x=
<code>low</code> for the part below the main diagonal <br /></p>
<p>– <code>flowreduct()</code> is to reduce the flow dataset regarding
another matrix, e.g. distances travelled. <br /></p>
<p><code>metric</code> is the metric of the distance matrix :<br /> -
metric= <code>continuous</code> (e.g. for kilometers) <br /> - metric=
<code>ordinal</code> (e.g. for <code>k</code> contiguity) <br /></p>
<p>If the metric is <code>continuous</code> (e.g for filtering flows by
kilometric distances travelled), use:<br /></p>
<p><code>d.criteria</code> is for selecting the minimum or the maximum
distance criteria <br /> - d.criteria= <code>dmin</code> for keeping only
flows up to a <em>dmin</em> criterion in km <br /> - d.criteria=
<code>dmax</code> for selecting values less than a <em>dmax</em>
criterion in km <br /></p>
<p><code>d</code> is the value of the selected <code>dmin</code> or
<code>dmax</code> criteria.</p>
<p>Notice that these arguments can be used as a filter criterion in
<code>flowmap()</code>.</p>
<p>See Cartograflow_distance and Cartograflow_ordinal_distance Vignettes
for examples.<br /> URL: <a href="https://github.com/fbahoken/cartogRaflow/tree/master/vignettes" class="uri">https://github.com/fbahoken/cartogRaflow/tree/master/vignettes</a></p>
<p><strong>2. Flows filtering:</strong> <br /></p>
<p><strong>2.1. Filtering from flow concentration analysis</strong></p>
<p><strong>Flow concentration analysis:</strong></p>
<p>– <code>flowgini()</code> performs a Gini’s concentration analysis of
the flow features, by computing <em>Gini coefficient</em> and plotting
interactive <em>Lorenz curve</em>.</p>
<p>To be use before <code>flowanalysis()</code></p>
<p>See Cartograflow_concentration Vignette for example.<br /> URL: <a href="https://github.com/fbahoken/cartogRaflow/tree/master/vignettes" class="uri">https://github.com/fbahoken/cartogRaflow/tree/master/vignettes</a></p>
<p><strong>Flow filtering according to a concentration
criterion:</strong></p>
<p>– <code>flowanalysis()</code> computes filters criterions based
on:<br /></p>
<ul>
<li>argument <code>critflow</code> is to filter the flows according to
their significativity (% of total of flow information) ; <br /></li>
<li>argument <code>critlink</code> is to filter the flows according to
their density (% of total features) <br /></li>
</ul>
<p>These arguments can be used as <code>filter</code> criterion in
<code>flowmap()</code>.</p>
<p>See Cartograflow_concentration Vignette for example.<br /> URL: <a href="https://github.com/fbahoken/cartogRaflow/tree/master/vignettes" class="uri">https://github.com/fbahoken/cartogRaflow/tree/master/vignettes</a></p>
<p><strong>2.2. Spatial / territorial filtering of flows</strong></p>
<p><strong>Flow filtering based on a continuous distance
criterion</strong></p>
<p>– <code>flowdist()</code> computes a <em>continous distance</em>
matrix from spatial features (area or points). The result is a matrix of
the distances travelled between ODs, with flows filtered or not.</p>
<p>See Cartograflow_distance Vignette for example.<br /> URL: <a href="https://github.com/fbahoken/cartogRaflow/tree/master/vignettes" class="uri">https://github.com/fbahoken/cartogRaflow/tree/master/vignettes</a></p>
<p><strong>Flow filtering based on an ordinal distance / neighbourhood
criterion</strong>:</p>
<p>– <code>flowcontig()</code> compute an <em>ordinal distance</em>
matrix from spatial features (area). The result is a matrix of adjacency
or k-contiguity of the ODs.</p>
<ul>
<li><code>background</code> is the areal spatial features ;<br /></li>
<li>code` is the spatial features codes ; <br /></li>
<li><code>k</code> is to enter the number (k:1,2,…,k) of the contiguity
matrix to be constructed : if (k=1), ODs places are adjacent, then the
flow have to cross only 1 boundary, else (k=k) ODs places are distant
from n borders ;<br /></li>
<li><code>algo</code> is the algorithm to use for ordinal distance
calculation (also Default is “automatic” for “Dijkstra’s”) ; <br /></li>
</ul>
<p>Notice that the function automatically returns the maximum (k) number
of the spatial layer.</p>
<p>See Cartograflow_distance_ordinal Vignette for example.</p>
<p><strong>3. Flow mapping</strong></p>
<p>– <code>flowmap()</code> is to plot flows as segments or arrows, by
acting on the following arguments:<br /></p>
<ul>
<li><code>filter</code> is to filter or not flow’s information or
features <br /></li>
<li><code>threshold</code> is used to set the filtering level of the
flows when filter=“True” <br /></li>
<li><code>taille</code> is the value of the width of the flow feature
<br /></li>
<li><code>a.head</code> is the arrow head parameter (in, out, in and
out) <br /></li>
<li><code>a.length</code> is the length of the edges of the arrow head
(in inches) <br /></li>
<li><code>a.angle</code> is the angle from the shaft of the arrow to the
edge of the arrow head <br /></li>
<li><code>a.col</code> is the arrow’s color <br /></li>
<li><code>plota</code> is to add spatial features as map background to
the flows’s plot <br /></li>
<li><code>add</code> is to allow to overlay flow features on external
spatial features background <br /></li>
</ul>
</div>
<div id="examples-of-applications" class="section level2">
<h2>Examples of applications</h2>
<p>– <strong>Useful packages</strong> Best external R package to use:
{dplyr} {sf} {igraph} {rlang} {cartography}</p>
</div>
<div id="load-datasets" class="section level2">
<h2><strong>1. Load datasets</strong></h2>
<p><strong>Flow dataset</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Load Statistical information</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>tabflow<span class="ot">&lt;-</span><span class="fu">read.csv2</span>(<span class="st">&quot;./data/MOBPRO_ETP.csv&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">&quot;;&quot;</span>,<span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>,</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                   <span class="at">encoding=</span><span class="st">&quot;UTF-8&quot;</span>, <span class="at">dec=</span><span class="st">&quot;.&quot;</span>,<span class="at">check.names=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    121 obs. of  4 variables:
##  $ i    : chr  &quot;T1&quot; &quot;T1&quot; &quot;T1&quot; &quot;T1&quot; ...
##  $ j    : chr  &quot;T1&quot; &quot;T10&quot; &quot;T11&quot; &quot;T12&quot; ...
##  $ Fij  : num  291058 8297 3889 17064 12163 ...
##  $ count: num  351 43 13 77 52 55 134 63 53 14 ...</code></pre>
<p><strong>Select variable and change matrix format</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Selecting useful variables for changing format</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>tabflow<span class="ot">&lt;-</span>tabflow <span class="sc">%&gt;%</span> <span class="fu">select</span>(i,j,Fij)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># From list (L) to matrix (M) format</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>matflow <span class="ot">&lt;-</span><span class="fu">flowtabmat</span>(tabflow,<span class="at">matlist=</span><span class="st">&quot;M&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">head</span>(matflow[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span></code></pre></div>
<pre><code>##         T1   T10   T11   T12
## T1  291058  8297  3889 17064
## T10  73743 19501 11707  4931
## T11  22408  9359 12108  6084
## T12  68625  1906  7269 46515</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">dim</span>(matflow)</span></code></pre></div>
<pre><code>## [1] 12 12</code></pre>
<p><strong>Geographical dataset</strong></p>
</div>
<div id="flow-types-computing" class="section level2">
<h2><strong>2. Flow types computing</strong></h2>
<p><em>Compute bilateral flows types : eg. volum, balance, bilateral
maximum and all types</em></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Bilateral volum (gross) FSij:  </span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>tabflow_vol<span class="ot">&lt;-</span><span class="fu">flowtype</span>(tabflow, <span class="at">format=</span><span class="st">&quot;L&quot;</span>, <span class="at">origin=</span><span class="st">&quot;i&quot;</span>, <span class="at">destination=</span><span class="st">&quot;j&quot;</span>, <span class="at">fij=</span><span class="st">&quot;Fij&quot;</span>,  <span class="at">x=</span> <span class="st">&quot;bivolum&quot;</span> )</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co"># Matrix format (M= : matflow_vol&lt;-flowtype(matflow, format=&quot;M&quot;, &quot;bivolum&quot;)</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co"># Bilateral balance (net ) FBij:  </span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>tabflow_net<span class="ot">&lt;-</span><span class="fu">flowtype</span>(tabflow, <span class="at">format=</span><span class="st">&quot;L&quot;</span>, <span class="at">origin=</span><span class="st">&quot;i&quot;</span>, <span class="at">destination=</span><span class="st">&quot;j&quot;</span>, <span class="at">fij=</span><span class="st">&quot;Fij&quot;</span>, <span class="at">x=</span><span class="st">&quot;bibal&quot;</span>)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co"># Bilateral maximum (maxFij): </span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>tabflow_max<span class="ot">&lt;-</span><span class="fu">flowtype</span>(tabflow, <span class="at">format=</span><span class="st">&quot;L&quot;</span>, <span class="at">origin=</span><span class="st">&quot;i&quot;</span>, <span class="at">destination=</span><span class="st">&quot;j&quot;</span>, <span class="at">fij=</span><span class="st">&quot;Fij&quot;</span>, <span class="at">x=</span><span class="st">&quot;bimax&quot;</span>)</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co"># Compute all types of bilateral flows, in one 11 columns</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>tabflow_all<span class="ot">&lt;-</span><span class="fu">flowtype</span>(tabflow,<span class="at">format=</span><span class="st">&quot;L&quot;</span>, <span class="at">origin=</span><span class="st">&quot;i&quot;</span>, <span class="at">destination=</span><span class="st">&quot;j&quot;</span>, <span class="at">fij=</span><span class="st">&quot;Fij&quot;</span>, <span class="at">x=</span><span class="st">&quot;alltypes&quot;</span>)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="fu">head</span>(tabflow_all) </span></code></pre></div>
<pre><code>##    i   j    Fij    Fji   FSij  FBij      FAij minFij maxFij rangeFij      FDij
## 1 T1  T1 291058 291058 582116     0 0.0000000 291058 291058        0 0.0000000
## 2 T1 T10   8297  73743  82040 65446 0.7977328   8297  73743    65446 0.7977328
## 3 T1 T11   3889  22408  26297 18519 0.7042248   3889  22408    18519 0.7042248
## 4 T1 T12  17064  68625  85689 51561 0.6017225  17064  68625    51561 0.6017225
## 5 T1  T2  12163  47427  59590 35264 0.5917771  12163  47427    35264 0.5917771
## 6 T1  T3  32682  45772  78454 13090 0.1668494  32682  45772    13090 0.1668494</code></pre>
</div>
<div id="direct-flow-mapping" class="section level2">
<h2><strong>3. Direct flow mapping</strong></h2>
<p><strong>3.1. Plot all origin-destination without any filtering
criterion</strong> The result will reveal a graphic complexity
(“spaghetti-effect”“)</p>
<p>Plot links</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>map<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="st">&quot;./data/MGP_TER.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `MGP_TER&#39; from data source 
##   `/tmp/RtmpDMwbzy/Rbuild120857ab09da8/cartograflow/vignettes/data/MGP_TER.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 12 features and 14 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 637297.4 ymin: 6838629 xmax: 671752.1 ymax: 6879246
## Projected CRS: Lambert_Conformal_Conic</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Add and overlay spatial background </span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg =</span> <span class="st">&quot;NA&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Graphic parameters</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>extent <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2800000</span>, <span class="dv">1340000</span>, <span class="dv">6400000</span>, <span class="dv">4800000</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>resolution<span class="ot">&lt;-</span><span class="dv">150</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(map), <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">bg=</span><span class="st">&quot;#dfe6e1&quot;</span>)</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(map), <span class="at">col =</span> <span class="st">&quot;light grey&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co"># Flowmapping of all links</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="fu">flowmap</span>(<span class="at">tab=</span>tabflow,</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>        <span class="at">fij=</span><span class="st">&quot;Fij&quot;</span>,</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>        <span class="at">origin.f =</span> <span class="st">&quot;i&quot;</span>,</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>        <span class="at">destination.f =</span> <span class="st">&quot;j&quot;</span>,</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>        <span class="at">bkg =</span> map,</span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>        <span class="at">code=</span><span class="st">&quot;EPT_NUM&quot;</span>,</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>        <span class="at">nodes.X=</span><span class="st">&quot;X&quot;</span>,</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>        <span class="at">nodes.Y =</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>        <span class="at">filter=</span><span class="cn">FALSE</span>,</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>        <span class="at">add=</span><span class="cn">TRUE</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>        )</span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a><span class="fu">library</span>(cartography)</span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a><span class="co"># Map cosmetics</span></span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;All origin-destination for commuting in Greater Paris, 2017&quot;</span>,</span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a>           <span class="at">coltitle =</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a>           <span class="at">author =</span> <span class="st">&quot;Cartograflow, 2020&quot;</span>,</span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a>           <span class="at">sources =</span> <span class="st">&quot;Data : INSEE, 2017 ; Basemap : APUR, RIATE, 2018.&quot;</span>,</span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a>           <span class="at">scale =</span> <span class="dv">2</span>,</span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a>           <span class="at">tabtitle =</span> <span class="cn">FALSE</span>,</span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a>           <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a>            )</span>
<span id="cb11-38"><a href="#cb11-38" tabindex="-1"></a><span class="co"># North arrow</span></span>
<span id="cb11-39"><a href="#cb11-39" tabindex="-1"></a><span class="fu">north</span>(<span class="st">&quot;topright&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p><strong>3.2. Plot the above-average flows</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>map<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="st">&quot;./data/MGP_TER.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `MGP_TER&#39; from data source 
##   `/tmp/RtmpDMwbzy/Rbuild120857ab09da8/cartograflow/vignettes/data/MGP_TER.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 12 features and 14 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 637297.4 ymin: 6838629 xmax: 671752.1 ymax: 6879246
## Projected CRS: Lambert_Conformal_Conic</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Add and overlay spatial background </span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg =</span> <span class="st">&quot;NA&quot;</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># Graphic parameters</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>extent <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2800000</span>, <span class="dv">1340000</span>, <span class="dv">6400000</span>, <span class="dv">4800000</span>)</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>resolution<span class="ot">&lt;-</span><span class="dv">150</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(map), <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">bg=</span><span class="st">&quot;#dfe6e1&quot;</span>)</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(map), <span class="at">col =</span> <span class="st">&quot;light grey&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co"># Flow mapping above-average flows</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="fu">flowmap</span>(<span class="at">tab=</span>tabflow,</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>        <span class="at">fij=</span><span class="st">&quot;Fij&quot;</span>,</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>        <span class="at">origin.f =</span> <span class="st">&quot;i&quot;</span>,</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>        <span class="at">destination.f =</span> <span class="st">&quot;j&quot;</span>,</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>        <span class="at">bkg =</span> map,</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>        <span class="at">code=</span><span class="st">&quot;EPT_NUM&quot;</span>,</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>        <span class="at">nodes.X=</span><span class="st">&quot;X&quot;</span>,</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>        <span class="at">nodes.Y =</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>        <span class="at">filter=</span><span class="cn">TRUE</span>,</span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>        <span class="at">threshold =</span>(<span class="fu">mean</span>(tabflow<span class="sc">$</span>Fij)),  <span class="co">#mean value is the level of threshold</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>        <span class="at">taille=</span><span class="dv">20</span>,           </span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>        <span class="at">a.head =</span> <span class="dv">1</span>,</span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a>        <span class="at">a.length =</span> <span class="fl">0.11</span>,</span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>        <span class="at">a.angle =</span> <span class="dv">30</span>,</span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>        <span class="at">a.col=</span><span class="st">&quot;#138913&quot;</span>,</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>        <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a><span class="co"># Map Legend</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a><span class="fu">legendPropLines</span>(<span class="at">pos=</span><span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>                <span class="at">title.txt=</span><span class="st">&quot;Commuters &gt; 13220 &quot;</span>,</span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>                <span class="at">title.cex=</span><span class="fl">0.8</span>,   </span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a>                <span class="at">cex=</span><span class="fl">0.5</span>,</span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a>                <span class="at">values.cex=</span> <span class="fl">0.7</span>,  </span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a>                <span class="at">var=</span><span class="fu">c</span>(<span class="fu">mean</span>(tabflow<span class="sc">$</span>Fij),<span class="fu">max</span>(tabflow<span class="sc">$</span>Fij)), </span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a>                <span class="at">lwd=</span><span class="dv">5</span>, </span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a>                <span class="at">frame =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a>                <span class="at">col=</span><span class="st">&quot;#138913&quot;</span>,</span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a>                <span class="at">values.rnd =</span> <span class="dv">0</span></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a>                )</span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a><span class="co">#Map cosmetic</span></span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Commuters up to above-average in Greater Paris&quot;</span>,</span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a>           <span class="at">coltitle =</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a>           <span class="at">author =</span> <span class="st">&quot;Cartograflow, 2020&quot;</span>,</span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a>           <span class="at">sources =</span> <span class="st">&quot;Data : INSEE, 2017 ; Basemap : APUR, RIATE, 2018.&quot;</span>,</span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a>           <span class="at">scale =</span> <span class="dv">2</span>,</span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a>           <span class="at">tabtitle =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a>           <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a>            )</span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a></span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a><span class="co"># North arrow</span></span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a><span class="fu">north</span>(<span class="st">&quot;topright&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p><strong>3.3. Plot the net flows of bilateral flows</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co">#library(sf)</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>map<span class="ot">&lt;-</span><span class="fu">st_read</span>(<span class="st">&quot;./data/MGP_TER.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `MGP_TER&#39; from data source 
##   `/tmp/RtmpDMwbzy/Rbuild120857ab09da8/cartograflow/vignettes/data/MGP_TER.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 12 features and 14 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 637297.4 ymin: 6838629 xmax: 671752.1 ymax: 6879246
## Projected CRS: Lambert_Conformal_Conic</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Net matrix reduction</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>tabflow_net <span class="ot">&lt;-</span> tabflow_net <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.data<span class="sc">$</span>FBij<span class="sc">&gt;=</span><span class="dv">0</span>)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co"># Net matrix thresholding</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>Q80<span class="ot">&lt;-</span><span class="fu">quantile</span>(tabflow_net<span class="sc">$</span>FBij,<span class="fl">0.95</span>)</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="co"># Add and overlay spatial background </span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="fu">par</span>(<span class="at">bg =</span> <span class="st">&quot;NA&quot;</span>)</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="co"># Graphic parameters</span></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>extent <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2800000</span>, <span class="dv">1340000</span>, <span class="dv">6400000</span>, <span class="dv">4800000</span>)</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>resolution<span class="ot">&lt;-</span><span class="dv">150</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(map), <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">border=</span><span class="cn">NA</span>, <span class="at">bg=</span><span class="st">&quot;#dfe6e1&quot;</span>)</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(map), <span class="at">col =</span> <span class="st">&quot;light grey&quot;</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="co"># Flow mapping above-average flows</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="fu">flowmap</span>(<span class="at">tab=</span>tabflow_net,</span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a>        <span class="at">fij=</span><span class="st">&quot;FBij&quot;</span>,</span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a>        <span class="at">origin.f =</span> <span class="st">&quot;i&quot;</span>,</span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a>        <span class="at">destination.f =</span> <span class="st">&quot;j&quot;</span>,</span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a>        <span class="at">bkg =</span> map,</span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a>        <span class="at">code=</span><span class="st">&quot;EPT_NUM&quot;</span>,</span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a>        <span class="at">nodes.X=</span><span class="st">&quot;X&quot;</span>,</span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a>        <span class="at">nodes.Y =</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a>        <span class="at">filter=</span><span class="cn">TRUE</span>,</span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a>        <span class="at">threshold =</span> Q80,</span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a>        <span class="at">taille=</span><span class="dv">12</span>,           </span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>        <span class="at">a.head =</span> <span class="dv">1</span>, </span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a>        <span class="at">a.length =</span> <span class="fl">0.11</span>,</span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a>        <span class="at">a.angle =</span> <span class="dv">30</span>,</span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a>        <span class="at">a.col=</span><span class="st">&quot;#4e8ef5&quot;</span>,</span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a>        <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a></span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="co"># Map Legend</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a><span class="fu">legendPropLines</span>(<span class="at">pos=</span><span class="st">&quot;topleft&quot;</span>,</span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a>                <span class="at">title.txt=</span><span class="st">&quot;Commuters &gt; 5722 &quot;</span>,</span>
<span id="cb17-40"><a href="#cb17-40" tabindex="-1"></a>                <span class="at">title.cex=</span><span class="fl">0.8</span>,   </span>
<span id="cb17-41"><a href="#cb17-41" tabindex="-1"></a>                <span class="at">cex=</span><span class="fl">0.5</span>,</span>
<span id="cb17-42"><a href="#cb17-42" tabindex="-1"></a>                <span class="at">values.cex=</span> <span class="fl">0.7</span>,  </span>
<span id="cb17-43"><a href="#cb17-43" tabindex="-1"></a>                <span class="at">var=</span><span class="fu">c</span>(Q80,<span class="fu">max</span>(tabflow_net<span class="sc">$</span>FBij)), </span>
<span id="cb17-44"><a href="#cb17-44" tabindex="-1"></a>                <span class="at">lwd=</span><span class="dv">12</span>, </span>
<span id="cb17-45"><a href="#cb17-45" tabindex="-1"></a>                <span class="at">frame =</span> <span class="cn">FALSE</span>,</span>
<span id="cb17-46"><a href="#cb17-46" tabindex="-1"></a>                <span class="at">col=</span><span class="st">&quot;#4e8ef5&quot;</span>,</span>
<span id="cb17-47"><a href="#cb17-47" tabindex="-1"></a>                <span class="at">values.rnd =</span> <span class="dv">0</span></span>
<span id="cb17-48"><a href="#cb17-48" tabindex="-1"></a>                )</span>
<span id="cb17-49"><a href="#cb17-49" tabindex="-1"></a></span>
<span id="cb17-50"><a href="#cb17-50" tabindex="-1"></a><span class="co">#Map cosmetic</span></span>
<span id="cb17-51"><a href="#cb17-51" tabindex="-1"></a></span>
<span id="cb17-52"><a href="#cb17-52" tabindex="-1"></a><span class="fu">layoutLayer</span>(<span class="at">title =</span> <span class="st">&quot;Net commuters in Greater Paris (20% strongest)&quot;</span>,</span>
<span id="cb17-53"><a href="#cb17-53" tabindex="-1"></a>           <span class="at">coltitle =</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb17-54"><a href="#cb17-54" tabindex="-1"></a>           <span class="at">author =</span> <span class="st">&quot;Cartograflow, 2020&quot;</span>,</span>
<span id="cb17-55"><a href="#cb17-55" tabindex="-1"></a>           <span class="at">sources =</span> <span class="st">&quot;Data : INSEE, 2017 ; Basemap : APUR, RIATE, 2018.&quot;</span>,</span>
<span id="cb17-56"><a href="#cb17-56" tabindex="-1"></a>           <span class="at">scale =</span> <span class="dv">2</span>,</span>
<span id="cb17-57"><a href="#cb17-57" tabindex="-1"></a>           <span class="at">tabtitle =</span> <span class="cn">FALSE</span>,</span>
<span id="cb17-58"><a href="#cb17-58" tabindex="-1"></a>           <span class="at">frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-59"><a href="#cb17-59" tabindex="-1"></a>           <span class="at">col =</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb17-60"><a href="#cb17-60" tabindex="-1"></a>            )</span>
<span id="cb17-61"><a href="#cb17-61" tabindex="-1"></a></span>
<span id="cb17-62"><a href="#cb17-62" tabindex="-1"></a><span class="co"># North arrow</span></span>
<span id="cb17-63"><a href="#cb17-63" tabindex="-1"></a><span class="fu">north</span>(<span class="st">&quot;topright&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="sample-datasets" class="section level2">
<h2>Sample datasets</h2>
<p>– <em>Statistical dataset</em> : - INSEE - Base flux de mobilité
(2015) - URL : <a href="https://www.insee.fr/fr/statistiques/fichier/3566008/rp2015_mobpro_txt.zip" class="uri">https://www.insee.fr/fr/statistiques/fichier/3566008/rp2015_mobpro_txt.zip</a></p>
<p>– <em>Geographical dataset</em> :</p>
<ul>
<li>municipalities : IGN, GEOFLA 2015 v2.1</li>
<li>Greater Paris : APUR, UMS 2414 RIATE, 2018.</li>
</ul>
</div>
<div id="see-also" class="section level2">
<h2>See also</h2>
<p><a href="https://github.com/fbahoken/cartogRaflow/tree/master/vignettes" class="uri">https://github.com/fbahoken/cartogRaflow/tree/master/vignettes</a></p>
<p>– cartograflow_general.html <br /> – cartograflow_concentration.html
<br /> – cartograflow_distance.html <br /> –
cartograflow_ordinal_distance.hmtl <br /></p>
</div>
<div id="reference" class="section level2">
<h2>Reference</h2>
<p>– Bahoken Francoise (2016), Programmes pour R/Rtudio annexés, in :
<em>Contribution à la cartographie d’une matrix de flux</em>, Thèse de
doctorat, Université Paris 7, pp. 480-520.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
